# Session Bookmark: 2026-01-14

## Repository
https://github.com/HanzoRazer/string_master_v.4.0

## Summary
Explored the Zone-Tritone System codebase, fixed bugs, and tested features.

## Commits Made

```
ef272e0 feat(playlists): add backdoor cadence all keys playlist
28cb6f9 fix(exercises): support pack exercise format and fix bucket_a files
f808f6a fix(cli): handle dict-style in programs command
426f728 fix: replace Unicode characters with ASCII for Windows compatibility
```

## Bugs Fixed

1. **Unicode encoding errors on Windows** (cp1252 console)
   - Replaced en-dash, em-dash, arrows with ASCII equivalents
   - Fixed 58 files (source + data)

2. **`zt-band programs` TypeError**
   - Style can be dict or string; extract name from dict

3. **bucket_a exercise files not loading**
   - Added pack exercise format support (id/title vs name/program)
   - Fixed YAML syntax (quoted keys)
   - Fixed Unicode flat symbol
   - Updated programs to use existing style (ballad_basic)

## Features Tested

### CLI Tools
- `zt-band create` - Generate MIDI backing tracks
- `zt-band annotate` - Zone-Tritone chord analysis
- `zt-band styles` - List 13 available styles
- `zt-band programs` - List .ztprog presets
- `zt-band ex-list` - List exercises
- `zt-band ex-run` - Run exercises with instructions
- `zt-band play` - Render playlists to MIDI
- `zt-gravity analyze` - Chord progression analysis
- `zt-gravity explain` - Detailed gravity explanations
- `zt-gravity gravity` - Show gravity chain (cycle of 4ths)

### Exercise System
- Simple format: name, program, exercise_type
- Pack format: id, title, program_ref, goals, practice_steps, assessment
- Auto-generates task/interaction from pack fields

### Real-Time Features (require MIDI hardware)
- `zt-band rt-play` - Real-time playback with clave grid
- `zt-band practice` - MIDI-in quantizer/clave lock

## Key Analyses

### Backdoor Cadence (IV -> bVII7 -> I)
```
F -> Bb -> C
- Bb->C is whole-step (Zone 1 -> Zone 1)
- "Side door" resolution without V-I tension
```

### Autumn Leaves
```
Cm7 -> F7 -> Bbmaj7 -> Ebmaj7 -> Am7b5 -> D7 -> Gm7
- Two ii-V chains: Bb major then G minor
- Eb->A tritone pivot (6 semitones, in-zone)
- Falls through cycle of 4ths twice
```

### Tritone Substitution
```
F7 <-> B7  (share Eb-A axis)
D7 <-> Ab7 (share C-F# axis)
```

## Files Created

- `playlists/bucket_a/backdoor_cadence_all_keys.ztplay`
- `autumn_leaves_ballad.mid` (probabilistic tritone subs)
- `autumn_leaves_all_subs.mid` (all dominants substituted)

## Test Results
343 tests passing
